!function(){emy.plugin.themeSwitcher={defaultTheme:null,currentTheme:null,themes:[],init:function(){emy.log("themeSwitcher : init");var e=0,t=document.getElementsByTagName("link");for(e=0;e<t.length;e++)"text/css"==t[e].getAttribute("type")&&t[e].getAttribute("title")&&(emy.plugin.themeSwitcher.themes.push(t[e].getAttribute("title")),-1==t[e].getAttribute("rel").indexOf("alternate")&&(emy.plugin.themeSwitcher.defaultTheme=emy.plugin.themeSwitcher.currentTheme=t[e].getAttribute("title")));window.localStorage&&localStorage.getItem("emy-theme")&&emy.plugin.themeSwitcher.setTheme(localStorage.getItem("emy-theme"))},setTheme:function(e){if(emy.log("themeSwitcher : setTheme : "+e),e!=emy.plugin.themeSwitcher.currentTheme){var t=0,i=document.getElementsByTagName("link");for(t=0;t<i.length;t++)-1!=i[t].getAttribute("rel").indexOf("stylesheet")&&i[t].getAttribute("title")&&(emy.log(i[t]),i[t].getAttribute("title")==e?i[t].removeAttribute("disabled"):i[t].setAttribute("disabled",""));emy.plugin.themeSwitcher.currentTheme=e}},setDefaultTheme:function(){emy.log("themeSwitcher : setDefaultTheme"),emy.plugin.themeSwitcher.setTheme(emy.plugin.themeSwitcher.defaultTheme)},rememberTheme:function(e){emy.log("themeSwitcher : rememberTheme"),window.localStorage&&(e?localStorage.removeItem("emy-theme"):localStorage.setItem("emy-theme",emy.plugin.themeSwitcher.currentTheme))},addTheme:function(e,t){emy.log("themeSwitcher : addTheme");var i=document.createElement("link");i.type="text/css",i.title=e,i.rel="stylesheet alternate",i.href=t,document.getElementsByTagName("head")[0].appendChild(i),i.onload=emy.plugin.themeSwitcher.themes.push(e)},removeTheme:function(e){emy.log("themeSwitcher : removeTheme");var t,i;for(t=0;i=document.getElementsByTagName("link")[t];t++)-1!=i.getAttribute("rel").indexOf("style")&&i.getAttribute("title")&&i.getAttribute("title")==e&&(emy.plugin.themeSwitcher.themes.splice(e),document.getElementsByTagName("head")[0].removeChild(i))}},document.addEventListener("DOMContentLoaded",emy.plugin.themeSwitcher.init,!1)}();